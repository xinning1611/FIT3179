{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": "container",
  "height": 300,
  "data": {
      "url": "https://raw.githubusercontent.com/xinning1611/FIT3179/refs/heads/main/data_visualization_2/data/arrivals_by_state.csv"
  },
  "params": [{
      "name": "state_selection",
      "bind": {
          "input": "select",
          "options": [
              null, "Kedah", "Pulau Pinang", "Johor", "Perlis", "Sarawak",
              "Selangor", "Sabah", "Perak", "Kelantan", "Melaka",
              "W.P. Labuan", "Negeri Sembilan", "Pahang", "Terengganu"
          ],
          "labels": [
              "Show All", "Kedah", "Pulau Pinang", "Johor", "Perlis", "Sarawak",
              "Selangor", "Sabah", "Perak", "Kelantan", "Melaka",
              "W.P. Labuan", "Negeri Sembilan", "Pahang", "Terengganu"
          ],
          "name": "Select State: "
      }
  }],
  "transform": [{
          "filter": "state_selection == null || datum.soe == state_selection"
      },
      {
          "calculate": "state_selection == null ? 'All' : state_selection",
          "as": "selected_state"
      }
  ],
  "layer": [{
      "mark": {
          "type": "line",
          "point": true
      },
      "encoding": {
          "x": {
              "field": "date",
              "type": "ordinal",
              "timeUnit": "month",
              "axis": {
                  "title": "Month",
                  "labelAngle": -90,
                  "format": "%B",
                  "labelFontSize": 10,
                  "titleFontSize": 12
              },
              "title": "Month"
          },
          "y": {
              "aggregate": "sum",
              "field": "total_arrivals",
              "type": "quantitative",
              "axis": {
                  "title": "Number of Arrivals",
                  "tickCount": 10,
                  "labelFontSize": 10,
                  "titleFontSize": 12
              }
          },
          "color": {
              "value": "#001F3F"
          },
          "tooltip": [{
                  "field": "selected_state",
                  "type": "nominal",
                  "title": "State of Arrival"
              },
              {
                  "field": "date",
                  "type": "temporal",
                  "title": "Month",
                  "timeUnit": "month",
                  "format": "%B"
              },
              {
                  "aggregate": "sum",
                  "field": "total_arrivals",
                  "type": "quantitative",
                  "format": ",",
                  "title": "Visitor Counts"
              }
          ]
      }
  }]
}
